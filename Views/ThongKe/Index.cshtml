@* @model KhoHang_XNK.Models.ThongKeDoanhThuViewModel *@

@* <div class="row"> *@
@*     <div class="col-md-6"> *@
@*         <h3>Tổng tiền nhập hàng theo tháng</h3> *@
@*         <table class="table"> *@
@*             <thead> *@
@*                 <tr> *@
@*                     <th>Năm</th> *@
@*                     <th>Tháng</th> *@
@*                     <th>Tổng tiền nhập</th> *@
@*                 </tr> *@
@*             </thead> *@
@*             <tbody> *@
@*                 @foreach (var item in Model.DoanhThuNhapHang) *@
@*                 { *@
@*                     <tr> *@
@*                         <td>@item.Nam</td> *@
@*                         <td>@item.Thang</td> *@
@*                         <td>@item.TongTien.ToString("N0") đ</td> *@
@*                     </tr> *@
@*                 } *@
@*             </tbody> *@
@*         </table> *@
@*     </div> *@

@*     <div class="col-md-6"> *@
@*         <h3>Tổng tiền xuất hàng theo tháng</h3> *@
@*         <table class="table"> *@
@*             <thead> *@
@*                 <tr> *@
@*                     <th>Năm</th> *@
@*                     <th>Tháng</th> *@
@*                     <th>Tổng tiền xuất</th> *@
@*                 </tr> *@
@*             </thead> *@
@*             <tbody> *@
@*                 @foreach (var item in Model.DoanhThuXuatHang) *@
@*                 { *@
@*                     <tr> *@
@*                         <td>@item.Nam</td> *@
@*                         <td>@item.Thang</td> *@
@*                         <td>@item.TongTien.ToString("N0") đ</td> *@
@*                     </tr> *@
@*                 } *@
@*             </tbody> *@
@*         </table> *@
@*     </div> *@
@* </div> *@
  @model KhoHang_XNK.Models.ThongKeDoanhThuViewModel

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!--Sidebar-->
<div class="sidebar transition overlay-scrollbars animate__animated  animate__slideInLeft">
	<div class="sidebar-content">
		<div id="sidebar">

			<!-- Logo -->
			<div class="logo">
				<h2 class="mb-0"><img src="#"> WareTrack</h2>
			</div>

			<ul class="side-menu">
				<li>
					<a asp-controller="KhoHang" asp-action="Index">
						<i class='bx bxs-dashboard icon'></i> Kho Hàng
					</a>
				</li>

				<!-- Divider-->
				<li class="divider" data-text="STARTER">Quản lý Hàng hóa</li>

				<li>
					<a asp-controller="HangHoa" asp-action="Index">
						<i class='bx bx-columns icon'></i>
						Hàng Hóa
					</a>
				</li>

				<li>
					<a asp-controller="LoaiHangHoa" asp-action="Index">
						<i class='bx bxs-meh-blank icon'></i>
						Loại Hàng Hóa
					</a>
				</li>

				<li>
					<a asp-controller="TonKho" asp-action="Index" class="active">
						<i class='fa fa-th icon'></i>
						Tồn Kho
					</a>
				</li>

				<!-- Divider-->
				<li class="divider" data-text="Atrana">Quản lý Nhân sự và Khách hàng</li>

				<li>
					<a asp-controller="NhanVien" asp-action="Index">
						<i class='bx bxs-user icon'></i>
						Nhân Viên
					</a>
				</li>

				<li>
					<a asp-controller="KhachHang" asp-action="Index">
						<i class='bx bxs-notepad icon'></i>
						Khách Hàng
					</a>
				</li>

				<li>
					<a asp-controller="LoaiHangHoa" asp-action="Index">
						<i class='bx bxs-widget icon'></i>
						Loại Khách Hàng
					</a>
				</li>

				<!-- Divider-->
				<li class="divider" data-text="Pages">Quản lý Nhà cung cấp</li>
				<li>
					<a asp-controller="NhaCungCap" asp-action="Index">
						<i class='fa fa-pencil-ruler icon'></i>
						Nhà Cung Cấp
					</a>
				</li>

				<!-- Divider-->
				<li class="divider" data-text="Pages">Quản lý Nhà cung cấp</li>
				<li>
					<a asp-controller="DonNhapHang" asp-action="Index">
						<i class='bx bxs-notepad icon'></i>
						Đơn Nhập Hàng
					</a>
				</li>
				<li>
					<a asp-controller="DonXuatHang" asp-action="Index">
						<i class='bx bxs-notepad icon'></i>
						Đơn Xuất Hàng
					</a>
				</li>
				<li>
					<a asp-controller="PhieuKiemKe" asp-action="Index">
						<i class='bx bxs-notepad icon'></i>
						Phiếu Kiểm Kê
					</a>
				</li>
				<li>
					<a asp-controller="ThongKe" asp-action="Index">
						<i class="bx bxs-bar-chart-alt-2 icon"></i>
						Thông Kê Doanh Thu
					</a>
				</li>
			</ul>
		</div>
	</div>
</div>
<!-- End Sidebar-->


<div class="sidebar-overlay"></div>

<div class="content-start transition">

	<div class="container-fluid dashboard">
		@* <div class="row"> *@
		@* 	<div class="col-md-6"> *@
		@* 		<h3>Tổng tiền nhập hàng theo tháng</h3> *@
		@* 		<canvas id="chartNhapHang"></canvas> *@
		@* 	</div> *@

		@* 	<div class="col-md-6"> *@
		@* 		<h3>Tổng tiền xuất hàng theo tháng</h3> *@
		@* 		<canvas id="chartXuatHang"></canvas> *@
		@* 	</div> *@
		@* </div> *@
		<div class="row">
			<!-- Bar Chart for "Tổng tiền nhập hàng theo tháng" -->
			<div class="col-md-6">
				<div class="card">
					<div class="card-header">
						<h4 class="card-title">Tổng tiền nhập hàng theo tháng</h4>
					</div>
					<div class="card-body">
						<canvas id="barNhapHang"></canvas>
					</div>
				</div>
			</div>

			<!-- Bar Chart for "Tổng tiền xuất hàng theo tháng" -->
			<div class="col-md-6">
				<div class="card">
					<div class="card-header">
						<h4 class="card-title">Tổng tiền xuất hàng theo tháng</h4>
					</div>
					<div class="card-body">
						<canvas id="barXuatHang"></canvas>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>



<script>
	// Get data from ViewBag
	var doanhThuNhapHangData = @Html.Raw(ViewBag.DoanhThuNhapHangJson);
	var doanhThuXuatHangData = @Html.Raw(ViewBag.DoanhThuXuatHangJson);

	// Data for "Nhập Hàng" Bar Chart
	var labelsNhapHang = doanhThuNhapHangData.map(item => item.Thang + '/' + item.Nam);
	var dataNhapHang = doanhThuNhapHangData.map(item => item.TongTien);

	// Data for "Xuất Hàng" Bar Chart
	var labelsXuatHang = doanhThuXuatHangData.map(item => item.Thang + '/' + item.Nam);
	var dataXuatHang = doanhThuXuatHangData.map(item => item.TongTien);

	// Chart for "Nhập Hàng"
	var ctxNhapHang = document.getElementById('barNhapHang').getContext('2d');
	var chartNhapHang = new Chart(ctxNhapHang, {
		type: 'bar', // Bar Chart
		data: {
			labels: labelsNhapHang,
			datasets: [{
				label: 'Tổng tiền nhập hàng',
				data: dataNhapHang,
				backgroundColor: 'rgba(75, 192, 192, 0.2)',
				borderColor: 'rgba(75, 192, 192, 1)',
				borderWidth: 1
			}]
		},
		options: {
			responsive: true,
			scales: {
				y: {
					beginAtZero: true,
					ticks: {
						callback: function(value) {
							return value.toLocaleString() + ' đ'; // Add currency format
						}
					}
				}
			}
		}
	});

	// Chart for "Xuất Hàng"
	var ctxXuatHang = document.getElementById('barXuatHang').getContext('2d');
	var chartXuatHang = new Chart(ctxXuatHang, {
		type: 'bar', // Bar Chart
		data: {
			labels: labelsXuatHang,
			datasets: [{
				label: 'Tổng tiền xuất hàng',
				data: dataXuatHang,
				backgroundColor: 'rgba(255, 99, 132, 0.2)',
				borderColor: 'rgba(255, 99, 132, 1)',
				borderWidth: 1
			}]
		},
		options: {
			responsive: true,
			scales: {
				y: {
					beginAtZero: true,
					ticks: {
						callback: function(value) {
							return value.toLocaleString() + ' đ'; // Add currency format
						}
					}
				}
			}
		}
	});
</script>